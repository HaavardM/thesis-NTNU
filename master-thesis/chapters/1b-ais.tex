\chapter{AIS}\label{chap:ais}

The \textit{\acrfull{ais}} is a vessel-to-vessel communication system, which allows a vessel to share vital information about its current state with other ships, base stations, and satellites electronically. International voyaging ships with gross tonnage larger than 300 and all passenger ships are required to install an \acrshort{ais} transceiver according to the \textit{Safety Of Life At Sea} (SOLAS) convention \cite{ais_wiki} \todo[]{Cite Hexeberg or Wikipedia? How to cite conventions and other non-academic stuff?}

The typical \acrshort{ais} receiver has a range of about 10-20 nautical miles. However, \acrshort{ais} transceivers have been installed on satellites in later years, resulting in global coverage. The messages are divided into two types of classes:
\begin{description}
    \item[Class A] typically transmits at a higher rate, ranging between 30 times per minute for high-velocity vessels to every third minute for vessels at rest. 
    \item[Class B] are typically smaller, cheaper, and simpler than their Class A counterparts. The position message for Class B is sent every 3 minutes when the vessel's speed is less than 2 knots and every 30 seconds for faster speeds. 
\end{description}

\section{Message Contents}
\begin{table}[h]
    \centering
    \begin{tabular}{p{0.15\textwidth}  p{0.8\textwidth}}
        \textit{\textbf{Parameter}} & \textit{\textbf{Explanation}}                                                                                                     \\ \hline
        IMO                         & 7 digit vessel identification number that remains unchanged when transferring a vessel's registration to a new country            \\
        \acrshort{mmsi}                        & \textit{\acrfull{mmsi}}, a 9 digit vessel identification number                                                          \\
        Long                        & Degress longitude in range $[-180^\circ W, 180^\circ E]$                                                                          \\
        Lat                         & Degrees latitude in range $[90^\circ S, 90^\circ N]$                                                                             \\
        \acrshort{cog}                         & \textit{\acrfull{cog}} is the clockwise rotation of the vessel's velocity vector relative to true north                               \\
        \acrshort{sog}                         & \textit{\acrfull{sog}} is the absolute value of the vessel's velocity vector in knots.                                               \\
        Heading                     & Direction of vessel's nose or bow relative to true north. Independent of the actual movement, so not necessarily identical to COG. NB: Not always available. \\
        Timestamp                   & Number of days elapsed since 1. jan 1900, 00:00                                                                                   \\ \hline
    \end{tabular}
    \caption{Common content of \acrshort{ais} messages \cite{hexeberg}.}
    \label{table:ais_content}
\end{table}
The typical \acrshort{ais} message contains unique identification (MMSI / IMO), position (longitude and latitude GPS coordinates), course (\acrshort{cog}) and speed (\acrshort{sog}). The relevant message content for this thesis is summarized in \cref{table:ais_content}.

Several other fields may additionally be available, depending on the transceiver and which information the crew has entered. 

\section{The Dataset}
The total dataset contains $2995644$ \acrshort{ais} samples collected between 1. Jan and 31. Des 2015. There are $1555$ unique \acrshort{mmsi} values, though most of the messages come from a small subset of the vessels. More than $80\%$ of the dataset originates from the top $250$ vessels, as seen in \cref{fig:ais_cdf}.

\begin{figure}[h]
    \centering
    \includegraphics[width=0.5\textwidth]{figures/mmsi_cdf.pdf}
    \caption{Cumulative distribution of \acrshort{ais} messages for the $N$ most frequent vessel's.}
    \label{fig:ais_cdf}
\end{figure}

However, the dataset is currently too large to work with on a single computer conveniently. Two local regions are instead used in this thesis and are shown in \cref{fig:ais_data}. The first subset is from a curved section of the Trondheim fjord with a lot of traffic. The subset also includes a ferry crossing, which crosses the traffic lane. The other subset is from deeper into the fjord, from a relatively straight section. The dataset, therefore, contains both straight-line and curved trajectories, as well as crossing trajectories. 

\begin{figure}
    \centering
    \begin{subfigure}{\textwidth}
        \centering
        \includegraphics{figures/ais_map.pdf}
        \caption{Full dataset. The red areas marks the subset which will be used for testing purposes.}
    \end{subfigure}
    \begin{subfigure}{\textwidth}
        \centering
        \includegraphics{figures/ais_map_zoom.pdf}
        \caption{Zoomed-in version of the subsets used in this thesis.}
    \end{subfigure}
    \caption{The available \acrshort{ais} data used in this thesis. }
    \label{fig:ais_data}
\end{figure}

\section{Preprocessing}
The position (longitude and latitude) is converted from the standard World Geodetic System (WGS84) coordinates into the EUREF89 UTM32 (EPSG-25832) coordinate system \cite{kartverket}.  As a result, the coordinates are converted from spherical coordinates to a 2D euclidian coordinate system, where the first and second axis corresponds to easting and northing, respectively. This coordinate system is one of two official coordinate systems in Norway and yields significantly better projections in this area than other alternatives such as the Web-Mercator projector frequently used by online maps. Zone 32 was selected as it encompasses the target region.

\subsection{From samples to trajectories}\label{sec:from_ais_to_traj}
Samples with identical \acrshort{mmsi} and less than $15$ minutes between subsequent samples are considered part of the same trajectory. The $15$ minute requirement is added to ensure samples before and after docking are considered separate trajectories.
